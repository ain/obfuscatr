/*! obfuscatr - v1.3.0 - 2013-03-13
* http://obfuscatr.flashbit.net
* Copyright (c) 2013 Ain Tohvri; Licensed GPL */
function Obfuscatr(){this.result=null,this.stage=0,this.front=null,this.fliprollie=null,this.flip=null,this.field=null,this.btn=null,this.msg=null,this.box=null,this.logo=null,this.linkChangelog=null,this.algorithmJs=null,this.back=null,this.btnDone=null,this.flipShown=!1,this.animation={duration:0,starttime:0,to:1,now:0,from:0,firstElement:null,timer:null}}var createGenericButton=createGenericButton||function(){throw new Error("Please run in Dashboard context!")};String.prototype.bin2hex=function(){var e="";for(var t=0,n=this.split("").length;t<n;t++)e+="%"+this.charCodeAt(t).toString(16);return e},String.prototype.reverse=function(){return this.split("").reverse().join("")},Function.prototype.inScope=function(e){var t=this;return function(){return t.apply(e,arguments)}},Obfuscatr.prototype.widget=function(){return window.widget},Obfuscatr.prototype.init=function(){this.front=document.getElementById("front"),this.fliprollie=document.getElementById("fliprollie"),this.flip=document.getElementById("flip"),this.field=document.getElementById("field"),this.btn=document.getElementById("btn"),this.msg=document.getElementById("msg"),this.box=document.getElementById("box"),createGenericButton(this.btn,"Obfuscate!",this.obfuscate.inScope(this)),this.logo=document.getElementById("logo"),this.linkChangelog=document.getElementById("link-changelog"),this.algorithmJs=document.getElementById("algorithm-js"),this.back=document.getElementById("back"),this.btnDone=document.getElementById("btn-done"),createGenericButton(this.btnDone,"Done",this.hideBack.inScope(this)),this.toggle(),this.addEventListeners()},Obfuscatr.prototype.addEventListeners=function(){this.front.onmousemove=this.mousemove.inScope(this),this.front.onmouseout=this.mouseexit.inScope(this),this.logo.onclick=this.launchSite.inScope(this),this.linkChangelog.onclick=this.launchChangelog.inScope(this),this.btnDone.onclick=this.hideBack.inScope(this),this.flip.onclick=this.showBack.inScope(this),this.flip.onmouseover=this.enterflip.inScope(this),this.flip.onmouseout=this.exitflip.inScope(this)},Obfuscatr.prototype.isValidEmail=function(e){var t=/^([\w\-\.\+])+\@([\w\-]+\.)+([\w]{2,})+$/;return t.test(e)},Obfuscatr.prototype.errorHandle=function(e){var t;switch(e){case 1:t="Please enter email to obfuscate.";break;case 2:t="Invalid email. Please fix.";break;case 3:this.box.value=this.email,t="Done. Email copied to clipboard."}this.field.style.display="none",this.msg.innerHTML=t,this.msg.style.display="block",this.btn.innerHTML="",createGenericButton(this.btn,"Back",this.goBack.inScope(this))},Obfuscatr.prototype.obfuscate=function(){var e=this.box.value;if(e.length===0)this.errorHandle(1);else if(!this.isValidEmail(e))this.errorHandle(2);else{if(this.algorithmJs.checked){var t="document.write('<a href=\"mailto:"+e+'">'+e+"</a>');";this.result='<script type="text/javascript">eval(unescape("'+t.bin2hex()+'"));</script>'}else this.result='<script type="text/javascript">function obfuscatrtr() { window.location = \'mailto:\' + this.innerHTML.split("").reverse().join(""); }</script><a href="javascript:void(0);" onclick="obfuscatrtr.apply(this)" style="direction:rtl; unicode-bidi:bidi-override;">'+e.reverse()+"</a>";this.btn.innerHTML="",createGenericButton(this.btn,"Copy",this.copy.inScope(this)),this.stage=1,this.box.value=this.result,this.toggle()}},Obfuscatr.prototype.copy=function(){this.widget.system("/bin/echo -n '"+this.result.toString()+"' | /usr/bin/pbcopy",null),this.errorHandle(3)},Obfuscatr.prototype.goBack=function(e){this.btn.innerHTML="",this.msg.innerHTML="",this.field.style.display="block",createGenericButton(this.btn,"Obfuscate!",this.obfuscate.inScope(this)),this.toggle()},Obfuscatr.prototype.launchChangelog=function(){this.widget&&this.widget.openURL("http://obfuscatr.flashbit.net/download.html#changelog")},Obfuscatr.prototype.launchSite=function(){this.widget.openURL("http://obfuscatr.flashbit.net")},Obfuscatr.prototype.toggle=function(){this.box.focus(),this.box.select()},Obfuscatr.prototype.proceed=function(){return this.box.value===""?!1:(this.stage===1?this.copy():this.obfuscate(),!0)},Obfuscatr.prototype.showBack=function(){this.front.style.display="none",this.back.style.display="block",this.widget.prepareForTransition("ToBack"),setTimeout(this.widget.performTransition,0)},Obfuscatr.prototype.hideBack=function(){this.back.style.display="none",this.front.style.display="block",this.widget.prepareForTransition("ToFront"),setTimeout(this.widget.performTransition,0)},Obfuscatr.prototype.limit_3=function(e,t,n){return e<t?t:e>n?n:e},Obfuscatr.prototype.computeNextFloat=function(e,t,n){return e+(t-e)*n},Obfuscatr.prototype.enterflip=function(e){this.fliprollie.style.display="block"},Obfuscatr.prototype.exitflip=function(e){this.fliprollie.style.display="none"},Obfuscatr.prototype.animate=function(){var e,t,n=(new Date).getTime();e=this.limit_3(n-this.animation.starttime,0,this.animation.duration),e>=this.animation.duration?(clearInterval(this.animation.timer),this.animation.timer=null,this.animation.now=this.animation.to):(t=.5-.5*Math.cos(Math.PI*e/this.animation.duration),this.animation.now=this.computeNextFloat(this.animation.from,this.animation.to,t)),this.animation.firstElement.style.opacity=this.animation.now},Obfuscatr.prototype.mousemove=function(e){this.flipShown||(this.animation.timer!=null&&(clearInterval(this.animation.timer),this.animation.timer=null),this.animation.duration=500,this.animation.starttime=(new Date).getTime()-13,this.animation.firstElement=this.flip,this.animation.timer=setInterval(this.animate.inScope(this),13),this.animation.from=this.animation.now,this.animation.to=1,this.animate(this),this.flipShown=!0)},Obfuscatr.prototype.mouseexit=function(e){this.flipShown&&(this.animation.timer!=null&&(clearInterval(this.animation.timer),this.animation.timer=null),this.animation.duration=500,this.animation.starttime=(new Date).getTime()-13,this.animation.firstElement=this.flip,this.animation.timer=setInterval(this.animate.inScope(this),13),this.animation.from=this.animation.now,this.animation.to=0,this.animate(),this.flipShown=!1)};